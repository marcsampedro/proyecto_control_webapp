{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3"><h4 class="mb-0">Evolución de la bolsa mensual</h4></div>
<div class="card shadow-sm mb-4"><div class="card-body">
  <form class="row g-2" method="post" action="{{ url_for('evolucion_new') }}">
    <div class="col-6 col-md-3"><label class="form-label">Mes (YYYY-MM)</label><input required name="mes" type="month" class="form-control"></div>
    <div class="col-6 col-md-3"><label class="form-label">Incremento</label><input name="incremento" type="number" step="0.01" class="form-control"></div>
    <div class="col-6 col-md-3"><label class="form-label">Acumulado</label><input name="acumulado" type="number" step="0.01" class="form-control"></div>
    <div class="col-12"><button class="btn btn-primary">Añadir</button></div>
  </form>
</div></div>
<div class="table-responsive"><table class="table table-striped align-middle">
  <thead class="table-light"><tr><th>Mes</th><th>Incremento</th><th>Acumulado</th><th style="width:160px;"></th></tr></thead>
  <tbody>
    {% for r in rows %}
    <tr>
      <form method="post" action="{{ url_for('evolucion_edit', rid=r.id) }}">
      <td><input name="mes" type="month" value="{{ r.mes.strftime('%Y-%m') }}" class="form-control form-control-sm"></td>
      <td><input name="incremento" type="number" step="0.01" value="{{ r.incremento }}" class="form-control form-control-sm"></td>
      <td><input name="acumulado" type="number" step="0.01" value="{{ r.acumulado }}" class="form-control form-control-sm"></td>
      <td class="text-nowrap"><button class="btn btn-sm btn-success">Guardar</button></form>
        <form class="d-inline" method="post" action="{{ url_for('evolucion_delete', rid=r.id) }}"><button class="btn btn-sm btn-outline-danger" onclick="return confirm('¿Eliminar?')">Eliminar</button></form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table></div>
{% endblock %}
